<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
  <title>AWM Hazard Data Tool</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="logo.png" type="image/png" />
</head>
<body>
  <!-- Loading Spinner -->
  <div id="loadingSpinner" class="loading-spinner">Processing...</div>
  <header class="awm-header">
    <!-- Logo and Title aligned side-by-side in the center -->
    <div class="header-content">
      <img src="logo.png" alt="AWM Logo" class="awm-logo-small" />
      <div class="header-text">
        <h1>Affordable Wire Management</h1>
        <h2>Hazard Data Tool</h2>
      </div>
    </div>
    <!-- API Counter vertically centered -->
    <div id="apiUsage" class="api-usage-counter">API Requests (Jan): 0</div>
  </header>

  <main class="tool-container">
    <!-- Flex container for side-by-side layout -->
    <div class="flex-container">
      <!-- Instructions Section -->
      <section class="instructions card">
        <h3>Instructions</h3>
        <ul class="instructions-list">
          <li>Download the CSV template below and fill in the required fields.</li>
          <li>Ensure the following data rules as per <b><a href="https://amplify.asce.org/api">ASCE Documentations Page:</a></b></li>
          <ul>
            <li><b>Latitude: </b>-90 to 90</li>
            <li><b>Longitude:</b> -180 to 180</li>
            <li><b>Standards:</b> 7-10, 7-16, 7-22, 41-17</li>
            <li><b>Risk Level:</b> 1, 2, 3, 4</li>
            <li>Site Class depends on Standards:</li>
            <ul>
              <li><b>7-10, 41-17:</b> A, B, C, D, E, F</li>
              <li><b>7-16:</b> A, B, C, D, E, F, B-estimated, D-default, BC, DE</li>
              <li><b>7-22:</b> A, B, C, D, E, B-estimated, D-default, BC, CD, DE, Default</li>
            </ul>
          </ul>
          <li>Upload the completed CSV and click 'Process'.</li>
          <li>Review results and download output.</li>
        </ul>
        <button id="downloadTemplateButton">Download Template</button>
      </section>

      <!-- Upload Section -->
      <section class="upload-section card">
        <h3>Upload CSV File</h3>
        <label for="csvFile">Choose CSV File:</label>
        <input type="file" id="csvFile" accept=".csv" aria-label="Upload CSV File"/>
        <div class="upload-controls">
          <button id="processButton" disabled>Process</button>
          <button id="downloadButton" disabled>Download CSV</button>
        </div>
        <!-- Excel Formatting Tips -->
        <div class="excel-tips">
          <h4>Excel Formatting Tips:</h4>
          <ul>
            <li>Ensure all fields, especially standards, are formatted as <strong>text</strong>.</li>
            <li>Do not let Excel auto-format numeric fields as dates.</li>
            <li>Double-check CSV formatting before uploading.</li>
          </ul>
        </div>
      </section>
    </div>

    <!-- Error Messages Section - Initially Hidden -->
    <section id="errorMessages" class="error-messages" style="display: none;"></section>

    <!-- Output Table Section - Full Width in Card -->
    <section class="output-section" id="outputSection" style="display: none;">
      <table id="outputTable">
        <thead>
          <tr>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>Standards</th>
            <th>Risk Level</th>
            <th>Site Class</th>
            <th>Seismic</th>
            <th>Wind</th>
            <th>Snow</th>
            <th>Ice</th>
            <th>Rain</th>
            <th>Flood</th>
            <th>Tsunami</th>
            <th>Tornado</th>
            <th>Response Code</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <footer class="awm-footer">
    <p>Developed by Fritz for Affordable Wire Management &copy; 2025</p>
  </footer>

  <script src="validation.js"></script>
  <script src="main.js"></script>
</body>
</html>
